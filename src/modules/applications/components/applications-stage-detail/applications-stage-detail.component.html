<div class="content">
    <div class="content-header">
        <div>
            <button class="btn btn-flat" [routerLink]="['../']" style="padding: 0;margin: 12px 0;">
                <hydro-icon [type]="'icon-arrow-left'"></hydro-icon>
                back to application
            </button>

            <div class="content-header__title">{{ (application$ | async)?.name }} / s{{(stageId | toNumber) + 1}}</div>
        </div>

        <div class="btn-group" *ngIf="isMonitoringAvailable">
            <mdl-select class="parameters-list__item--model" label="Chart time window" [(ngModel)]="chartTimeWidth">
                <mdl-option *ngFor="let param of chartTimeWidthParams" [value]="param.ms">{{ param.text }}</mdl-option>
            </mdl-select>
            <button class="btn" (click)="addMetric($event)" title="Add new app">
                <hydro-icon [type]="'icon-plus'"></hydro-icon>
                add metric
            </button>
        </div>
    </div>


    <div class="content-body">
        <div *ngIf="!isMonitoringAvailable" class="unavailable-message">
            Monitoring service is unavailable
        </div>
        <div #chartContainer>
                <div *ngFor="let chart of chartNames; let i = index" class="chart">
                    <div *ngIf="chart === 'Kolmogorov-Smirnov'" class="chart-filter">
                            <span>Feature: </span>
                            <mdl-select
                                #KolmogorovSelect
                                label="Choose feature"
                                [(ngModel)]="KolmogorovSmirnovCurrentFeature"
                                [autocomplete]="true"
                                (keydown.enter)="$event.preventDefault()"
                                >
                            <mdl-option 
                                *ngFor="let KolmogorovSmirnovFeature of KolmogorovSmirnovFeatures | matchSorter:'index': KolmogorovSelect.searchQuery" 
                                [value]="KolmogorovSmirnovFeature.index">{{ KolmogorovSmirnovFeature.index }}
                            </mdl-option>
                        </mdl-select>
                    </div>
                    <div [attr.data-chart]="chart"></div>
                </div>
        </div>
    </div>
</div>