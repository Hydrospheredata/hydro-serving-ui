<div>
  <h2 class="mdl-dialog__title mat-dialog-title">{{formTitle}}</h2>
  <form [formGroup]="weightedServiceForm" (ngSubmit)="submitWeightedServiceForm(weightedServiceForm)">
    <div class="mdl-dialog__content">

      <hydro-input-text name="serviceName" [formErrors]="formErrors.serviceName" label="Service Name" formControlName="serviceName"></hydro-input-text>

      <div class="input-text__error mdl-color-text--red">{{formErrors.weights}}</div>
      <div formArrayName="weights">
        <div *ngFor="let weight of weightedServiceForm['controls'].weights['controls']; let i = index">
            <div [formGroupName]="i">
              <div fxLayout="row" fxLayoutAlign="space-between center">
                <div fxFlex="35%" class="input-text form-group">

                  <label hidden class="control-label">Service id</label>
                  <mdl-select #autocompleteSelect
                              ([ngModel])="autocompleteCountryCode"
                              formControlName="serviceId"
                              [autocomplete]="true">
                    <mdl-option *ngFor="let model of modelsRuntime | search: 'source modelVersion': autocompleteSelect.searchQuery"
                                [value]="model.id">{{model.source + ' v' + model.modelVersion}}</mdl-option>
                  </mdl-select>
                </div>
              <hydro-input-text fxFlex="45%"
                                [formErrors]="formErrors.weight"
                                placeholder="Weight"
                                name="asd"
                                formControlName="weight">
              </hydro-input-text>
              <div>
                <mdl-icon class="cs-cursor-pointer mdl-color-text--light-blue-700" (click)="addWeightsForm()">
                  add_circle
                </mdl-icon>
                <mdl-icon class="cs-cursor-pointer mdl-color-text--red"
                          (click)="removeWeightsForm(i)"
                          *ngIf="weightedServiceForm['controls'].weights['controls'].length > 1">remove_circle
                </mdl-icon>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div class="cs-mt-30 cs-mb-32">
      <div class="mdl-grid mdl-grid--no-spacing">
        <div class="mdl-cell mdl-cell--12-col cs-text-right">
          <button (click)="dialogRef.hide()" type="button" mdl-button
                  class='mat-button mat-button--big'>
            CANCEL
          </button>
          <button type="submit" mdl-button [disabled]="weightedServiceForm.invalid"
                  class='mat-button mat-button--big mat-button--primary'
                  mdl-button-type="raised" mdl-colored="primary" mdl-ripple>
            Add context
          </button>
        </div>
      </div>
    </div>

  </form>
</div>
